<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>BlackLab Server Stress Tester</title>
		<script src='../jQuery.js'></script>
		<script src='../jquery.tablesorter.js'></script>
		<link rel='stylesheet' type='text/css' href='stress.css'>
		<script src='stress.js'></script>
	</head>
	<body>
		<h1>BlackLab Server Stress Tester</h1>
		
		<table>
			<tr>
				<td><label for='queriesFired'>Fired:</label></td>
				<td><input type='text' id='queriesFired' size='5' readonly class='readonly' /></td>
				
			</tr>
			
			<tr>
				<td><label for='queriesInProgress'>In progress:</label></td>
				<td><input type='text' id='queriesInProgress' size='5' readonly class='readonly' /></td>
				
				<td><label for='avgQueriesInProgress'>Average # in progress:</label></td>
				<td><input type='text' id='avgQueriesInProgress' size='5' readonly class='readonly' />
				
				<td><label for='maxQueriesInProgress'>Max # in progress:</label></td>
				<td><input type='text' id='maxQueriesInProgress' size='5' readonly class='readonly' />
				
			</tr>
			
			<tr>
				<td><label for='querySuccess'>Succesful queries:</label></td>
				<td><input type='text' id='querySuccess' size='5' readonly class='readonly' /></td>
				
				<td><label for='averageResponse'>Avg. resp. time:</label></td>
				<td><input type='text' id='averageResponse' size='5' readonly class='readonly' />
				
			</tr>
			
			<tr>
				<td><label for='queryFail'>Failed queries:</label></td>
				<td><input type='text' id='queryFail' size='5' readonly class='readonly' /></td>
				
			</tr>
			
		</table>
		
		<label for='output'>Console:</label>
		<textarea id='output'></textarea>
		
		<hr/>
		
		<form onsubmit='runTest(); return false;'>
			<p>
				<label for='indexName'>BLS index url:</label><br/>
				<input type='text' id='blsUrl' value='/blacklab-server/gysseling' />
			</p>
			
			<p>
				<label for='queryFreq'>Avg. queries / second:</label><br/>
				<input type='text' id='queryFreq' value='3' />
			</p>
			
			<p>
				<label for='testDuration'>Test duration in seconds:</label><br/>
				<input type='text' id='testDuration' value='10' />
			</p>
			
			<p>
				<label for='queryComplexity'>Query complexity: </label>
				<select onchange='onChangeQueryComplexity();' id='queryComplexity'>
					<option value='-1'>Very low</option>					
					<option value='0' selected='selected'>Low</option>					
					<option value='1'>Medium</option>					
					<option value='2'>High</option>					
				</select>
			</p>
			
			<p>
				<input type='checkbox' id='traceQueries' /> <label for='traceQueries'>Trace queries</label>
			</p>
			
			<input type='submit' value='Run test' />
		</form>

		<input type='button' onclick='clearCache()' value='Clear cache' />
		
		<table class='results tablesorter'>
			<thead>
				<tr>
					<th class='right'>Time (s)</th>
					<th>Query</th>
					<th class='right'>Hits</th>
				</tr>
			</thead>
			<tbody id='results'>
			</tbody>
		</table>		
		
	</body>
</html>
